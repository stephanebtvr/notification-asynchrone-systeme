# ============================================================
# CONFIGURATION PRODUCTION - UPSTASH KAFKA
# ============================================================
server.port=${PORT:8080}
spring.application.name=notification-service

# ============================================================
# UPSTASH KAFKA (Kafka managé gratuit)
# ============================================================
# Récupérer ces valeurs depuis : https://console.upstash.com/kafka
spring.kafka.bootstrap-servers=${UPSTASH_KAFKA_BOOTSTRAP_SERVERS}
spring.kafka.properties.sasl.mechanism=SCRAM-SHA-256
spring.kafka.properties.security.protocol=SASL_SSL
spring.kafka.properties.sasl.jaas.config=org.apache.kafka.common.security.scram.ScramLoginModule required username="${UPSTASH_KAFKA_USERNAME}" password="${UPSTASH_KAFKA_PASSWORD}";

# Producer Configuration
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer
spring.kafka.producer.acks=all
spring.kafka.producer.retries=3

# Consumer Configuration
spring.kafka.consumer.group-id=notification-group
spring.kafka.consumer.auto-offset-reset=earliest
spring.kafka.consumer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializer
spring.kafka.consumer.value-deserializer=org.springframework.kafka.support.serializer.JsonDeserializer
spring.kafka.consumer.properties.spring.json.trusted.packages=*
spring.kafka.consumer.enable-auto-commit=true

# Topic Configuration
kafka.topic.notifications=notifications-topic

# ============================================================
# CORS - Configuration pour production
# ============================================================
# Remplacer par l'URL de votre frontend Vercel
spring.web.cors.allowed-origins=${FRONTEND_URL:https://votre-app.vercel.app}
spring.web.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
spring.web.cors.allowed-headers=*
spring.web.cors.allow-credentials=true

# ============================================================
# WEBSOCKET
# ============================================================
websocket.endpoint=/ws
websocket.topic-prefix=/topic
websocket.notification-destination=/topic/notifications

# ============================================================
# LOGS
# ============================================================
logging.level.com.kafka.notification_service=INFO
logging.level.org.springframework.kafka=INFO
logging.level.org.apache.kafka=WARN